Solved by hand.

Puzzle and Leaderboard URL: [https://www.janestreet.com/puzzles/altered-states-2-solution/](https://www.janestreet.com/puzzles/altered-states-2-solution/)
